(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{746:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(17)),r=m(a(19)),s=a(9),o=m(a(11)),i=m(a(4)),c=m(a(5)),u=m(a(12)),l=m(a(13)),d=m(a(0)),f=m(a(1)),p=m(a(3)),v=m(a(8)),h=m(a(10)),g=a(2),y=m(a(15));function m(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(){var e,a,c,l,d=this;(0,i.default)(this,t);for(var f=arguments.length,g=Array(f),m=0;m<f;m++)g[m]=arguments[m];return a=c=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(g))),c.onGoToSettingsClick=function(){c.props.onFinished(),h.default.dispatch({action:"view_user_settings"})},c.onSetupClick=(0,s.coroutine)(n.default.mark(function e(){var t,a,o,i,u,l,f,h,g,m;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,(0,s.resolve)(v.default.get().getKeyBackupVersion());case 4:return a=e.sent,e.next=7,(0,s.resolve)(v.default.get().isKeyBackupTrusted(a));case 7:t=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),console.log("Unable to fetch key backup status",e.t0),e.abrupt("return");case 14:o=void 0,i=!0,u=!1,l=void 0,e.prev=18,f=(0,r.default)(t.sigs);case 20:if(i=(h=f.next()).done){e.next=28;break}if((g=h.value).device.isVerified()){e.next=25;break}return o=g.device,e.abrupt("break",28);case 25:i=!0,e.next=20;break;case 28:e.next=34;break;case 30:e.prev=30,e.t1=e.catch(18),u=!0,l=e.t1;case 34:e.prev=34,e.prev=35,!i&&f.return&&f.return();case 37:if(e.prev=37,!u){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(34);case 42:if(o){e.next=45;break}return console.log("Unable to find a device to verify."),e.abrupt("return");case 45:m=p.default.getComponent("views.dialogs.DeviceVerifyDialog"),y.default.createTrackedDialog("Device Verify Dialog","",m,{userId:v.default.get().credentials.userId,device:o,onFinished:c.props.onFinished});case 47:case"end":return e.stop()}},e,d,[[1,10],[18,30,34,42],[35,,37,41]])})),l=a,(0,u.default)(c,l)}return(0,l.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=p.default.getComponent("views.dialogs.BaseDialog"),t=p.default.getComponent("views.elements.DialogButtons"),a=d.default.createElement("span",{className:"mx_NewRecoveryMethodDialog_title"},(0,g._t)("New Recovery Method"));return d.default.createElement(e,{className:"mx_NewRecoveryMethodDialog",onFinished:this.props.onFinished,title:a,hasCancel:!1},d.default.createElement("div",null,d.default.createElement("p",null,(0,g._t)("A new recovery passphrase and key for Secure Messages has been detected.")),d.default.createElement("p",null,(0,g._t)("Setting up Secure Messages on this device will re-encrypt this device's message history with the new recovery method.")),d.default.createElement("p",{className:"warning"},(0,g._t)("If you didn't set the new recovery method, an attacker may be trying to access your account. Change your account password and set a new recovery method immediately in Settings.")),d.default.createElement(t,{primaryButton:(0,g._t)("Set up Secure Messages"),onPrimaryButtonClick:this.onSetupClick,cancelButton:(0,g._t)("Go to Settings"),onCancel:this.onGoToSettingsClick})))}}]),t}(d.default.PureComponent);k.propTypes={onFinished:f.default.func.isRequired},t.default=k,e.exports=t.default}}]);
//# sourceMappingURL=13.js.map